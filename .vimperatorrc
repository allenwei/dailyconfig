" settings

set guioptions+=m
" use the firefox awesomebar style hints 
set wildoptions=auto
set complete=l
"set complete=sbhfS

set defsearch=google
set hlsearch 
set incsearch
set smartcase

set showmode
set showstatuslinks

set nextpattern+=^\s*下一页\s*$,^\s*下一张\s*$,^››$
set previouspattern+=^\s*上一页\s*$,^\s*上一张\s*$,^‹‹$

"set wildmode=list:longest

"Allow user to click in address bar.
set! browser.urlbar.clickSelectsAll=true
set! browser.urlbar.doubleClickSelectsAll=true

" key mappings
map <A-n> :tabnew<CR>
map <A-.> :tabnext<CR>
map <A-,> :tabprev<CR>
map <A-q> :tabclose<CR>

"Map paste operation normally.
imap <C-v> <C-v>

" autocommands
"au LocationChange .* :js modes.passAllKeys = /mail\.google\.com/.test(buffer.URL)
au LocationChange .* :js modes.passAllKeys = /www\.google\.com\/reader/.test(buffer.URL)

"" for Linux 
"":au LocationChange .* :set editor=gvim -f
"":au LocationChange mail\.google\.com :set editor=gvim -f -c 'set ft=mail'
" for MacOSX
":set editor=open -W -n -t

:command -nargs=* g open google <args>
:map ,g :g 

" Changing the command line color when focused
javascript <<EOM
  (function() {
      var inputElement = document.getElementById('liberator-commandline-command');
      function swapBGColor(event) {
        inputElement.parentNode.style.backgroundColor = event.type == "focus" ? "yellow" : "";
      }
      inputElement.addEventListener('focus', swapBGColor, false);
      inputElement.addEventListener('blur', swapBGColor, false);
  })();
EOM

" Toggle element
:js << EOF
  toggle_element = function (name){
    document.getElementById(name).collapsed ^= 1;
  }
EOF

" Toggle webdeveloper toolbar
map <C-T> :js toggle_element('webdeveloper-toolbar')<CR>

javascript <<EOF
(function(){
 var feedPanel = document.createElement("statusbarpanel");
 feedPanel.setAttribute("id", "feed-panel-clone");
 feedPanel.appendChild(document.getElementById("feed-button"));
 feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
 document.getElementById("status-bar")
 .insertBefore(feedPanel, document.getElementById("security-button"));
 })();
EOF

" vim: ft=vimperator sw=2 sts=2
